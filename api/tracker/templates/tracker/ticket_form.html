{% extends "base_generic.html" %} {% load widget_tweaks %} {% block content %}
<h1 class="text-muted" style="text-align: center">Ticket Item</h1>

<form method="post">
  {% csrf_token %}

  <!-- Hidden fields -->
  {% for hidden_field in form.hidden_fields %} {{ hidden_field }} {% endfor %}

  <!-- Errors -->
  {% if form.non_field_errors %}
  <div class="alert alert-danger" role="alert">
    {% for error in form.non_field_errors %} {{ error }} {% endfor %}
  </div>
  {% endif %}

  <!-- Visible Form -->
  <div class="row g-2 needs-validation">
    <!-- Name and Email -->
    <div class="col-md-6">
      <label for="{{ form.name.id_for_label }}" class="form-label"
        >{{ form.name.label }}</label
      >
      <input
        type="text"
        class="form-control"
        id="{{ form.name.auto_id }}"
        name="{{ form.name.name }}"
        placeholder="{{ form.name.label }}"
        value="{{ form.name.value }}"
        required
      />
      <div class="form-text">{{ form.name.help_text }}</div>
    </div>
    <div class="col-md-6">
      <label for="{{ form.email.id_for_label }}" class="form-label"
        >{{ form.email.label }}</label
      >
      <input
        type="email"
        class="form-control"
        id="{{ form.email.auto_id }}"
        name="{{ form.email.name }}"
        placeholder="{{ form.email.label }}"
        value="{{ form.email.value }}"
        required
      />
    </div>

    <!-- Organization -->
    <div class="col-12">
      <label for="{{ form.organization.id_for_label }}" class="form-label"
        >{{ form.organization.label }}</label
      >
      <input
        type="text"
        class="form-control"
        id="{{ form.organization.auto_id }}"
        name="{{ form.organization.name }}"
        placeholder="{{ form.organization.label }}"
        value="{{ form.organization.value }}"
        required
      />
      <div class="form-text">{{ form.organization.help_text }}</div>
    </div>

    <hr />
    <!-- Study info -->
    <div class="col-12">
      <label for="{{ form.study_name.id_for_label }}" class="form-label"
        >{{ form.study_name.label }}</label
      >
      <input
        type="text"
        class="form-control"
        id="{{ form.study_name.auto_id }}"
        name="{{ form.study_name.name }}"
        placeholder="{{ form.study_name.label }}"
        value="{{ form.study_name.value }}"
      />
      <div class="form-text">{{ form.study_name.help_text }}</div>
    </div>

    <!-- Study Info -->
    <div class="col-md-4">
      <label for="{{ form.study_id.id_for_label }}" class="form-label"
        >{{ form.study_id.label }}</label
      >
      <input
        type="text"
        class="form-control"
        id="{{ form.study_id.auto_id }}"
        name="{{ form.study_id.name }}"
        placeholder="{{ form.study_id.label }}"
        value="{{ form.study_id.value }}"
        required
      />
      <div class="form-text">{{ form.study_id.help_text }}</div>
    </div>
    <div class="col-md-4">
      <label for="{{ form.consent_code.id_for_label }}" class="form-label"
        >{{ form.consent_code.label }}</label
      >
      <input
        type="text"
        class="form-control"
        id="{{ form.consent_code.auto_id }}"
        name="{{ form.consent_code.name }}"
        placeholder="{{ form.consent_code.label }}"
        value="{{ form.consent_code.value }}"
        required
      />
    </div>
    <div class="col-md-4">
      <label for="{{ form.data_size.id_for_label }}" class="form-label"
        >{{ form.data_size.label }}</label
      >
      <input
        type="text"
        class="form-control"
        id="{{ form.data_size.auto_id }}"
        name="{{ form.data_size.name }}"
        placeholder="{{ form.data_size.label }}"
        value="{{ form.data_size.value }}"
      />
    </div>

    <!-- TODO: Dataset Description -->
    <!-- TODO: Google/AWS Email -->

    <!-- FIXME: Test Data checkbox -->
    <div class="col-12">
      <div class="form-check">
        <input
          type="checkbox"
          class="form-check-input"
          id="{{
        form.is_test_data.auto_id }}"
          name="{{ form.is_test_data.name }}"
        />
        <label
          class="form-check-label"
          for="{{ form.is_test_data.id_for_label }}"
          >{{ form.is_test_data.help_text }}</label
        >
      </div>
    </div>

    <!-- Logic to show Create/Update/Delete Buttons -->
    <div class="col-12">
      {% if object %}
      <input class="btn btn-primary" type="submit" value="Update" />
      <a
        href="{% url 'tracker:ticket-delete' pk=object.pk %}"
        class="btn btn-danger"
        >Delete Ticket</a
      >
      {% else %}
      <input class="btn btn-primary" type="submit" value="Submit" />
      {% endif %}
    </div>
  </div>
</form>

<!-- DEBUG -->
<!-- {{ form.as_table }} {% endblock %} -->

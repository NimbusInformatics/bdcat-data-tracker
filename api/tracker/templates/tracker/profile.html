{% extends "base_generic.html" %} {% load socialaccount %} {% block content %}
<h1 class="text-muted" style="text-align: center">Profile</h1>

{% if user.is_authenticated %}
<div class="card text-center m-2">
  <div class="alert alert-success text-center" role="alert">
    <h2 class="display-4">
      <strong>{{ user.email }}</strong>
    </h2>
  </div>
  <div class="card-body">
    <p>Role privileges:
      {% if user.is_staff%} <strong>DATA ADMIN</strong> {% else %} <strong>DATA CUSTODIAN</strong> {% endif %}</p>
    <p>Date Joined: <strong>{{ user.date_joined }}</strong></p>
  </div>
  <div class="card-footer">
    <p>Last Login: <em>{{ user.last_login }}</em></p>
    <a href="/accounts/logout" class="btn btn-danger btn-md mb-2 form-element" role="button">
      Logout
    </a>
  </div>
</div>
{% else %}
<div class="card text-center m-2">
  <div class="alert alert-dark text-center" role="alert">
    <h2 class="display-4">
      Login
    </h2>
  </div>
  <div class="card-body">
    <p>Select third party login provider to continue</p>
  </div>
  <div class="card-footer">
  {% get_providers as socialaccount_providers %}
	{% for provider in socialaccount_providers %}
    <a href="{% provider_login_url provider.id process='login' %}" class="btn btn-success btn-md form-element"
      role="button">{{ provider.name }}</a>	
	{% endfor %}
    <button class="btn btn-danger btn-md form-element" disabled>NIH SSO</button>
  </div>
</div>
{% endif %}

{% for user in users %}
{{ user }}
{% endfor %}

{% endblock %}